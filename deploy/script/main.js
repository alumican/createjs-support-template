var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),alm;!function(t){var e=function(){function t(){}return t.map=function(t,e,i,n,r){return e==i?n:((t=e<i?t<e?e:t>i?i:t:t<i?i:t>e?e:t)-e)*(r-n)/(i-e)+n},t.random=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),t+(e-t)*Math.random()},t}();e.PI=Math.PI,e.PI2=2*e.PI,e.PI_2=e.PI/2,e.PI_3=e.PI/3,e.PI_4=e.PI/4,e.PI_6=e.PI/6,e.RAD2DEG=180/e.PI,e.DEG2RAD=e.PI/180,t.Num=e}(alm||(alm={}));var alm;!function(t){var e=function(){function t(){}return t.stop=function(t){return t&&t.interrupt(),null},t.fadeTo=function(t,e,i,n,r){void 0===r&&(r=!0);var o=new JPP.Tween(t,{alpha:e},null,i,n,function(){e>0&&(t.visible=!0)},null,function(){e<=0&&(t.visible=!1)});return r&&o.execute(),o},t.fadeIn=function(e,i,n,r){return void 0===r&&(r=!0),t.fadeTo(e,1,i,n,r)},t.fadeOut=function(e,i,n,r){return void 0===r&&(r=!0),t.fadeTo(e,0,i,n,r)},t}();t.CommandUtil=e}(alm||(alm={}));var alm;!function(t){var e=function(){function t(){}return t.getLinkageMovieClip=function(t){return new window.lib[t]},t.getChildByName=function(t,e){return t[e]},t}();t.AnimateUtil=e}(alm||(alm={}));var alm;!function(t){var e;!function(t){t[t.Top_Left=0]="Top_Left",t[t.Top_Center=1]="Top_Center",t[t.Top_Right=2]="Top_Right",t[t.Middle_Left=3]="Middle_Left",t[t.Middle_Center=4]="Middle_Center",t[t.Middle_Right=5]="Middle_Right",t[t.Bottom_Left=6]="Bottom_Left",t[t.Bottom_Center=7]="Bottom_Center",t[t.Bottom_Right=8]="Bottom_Right"}(e=t.Align||(t.Align={}));var i;!function(t){t[t.ExactFit=0]="ExactFit",t[t.ShowAll=1]="ShowAll",t[t.NoBorder=2]="NoBorder",t[t.NoScale=3]="NoScale"}(i=t.ScaleMode||(t.ScaleMode={}));var n=function(){function t(){}return t.resize=function(t,n,r,o){void 0===r&&(r=i.ShowAll),void 0===o&&(o=e.Middle_Center);var s=t.x,a=t.y,l=t.width,c=t.height,d=n.x,h=n.y,u=n.width,p=n.height;switch(r){case i.ShowAll:case i.NoBorder:var f=u/l,v=p/c,g=r==i.ShowAll?f<v?f:v:f>v?f:v;l*=g,c*=g;break;case i.ExactFit:return new createjs.Rectangle(d,h,u,p)}return s=d+(o==e.Top_Left||o==e.Middle_Left||o==e.Bottom_Left?0:o==e.Top_Right||o==e.Middle_Right||o==e.Bottom_Right?u-l:(u-l)/2),a=h+(o==e.Top_Left||o==e.Top_Center||o==e.Top_Right?0:o==e.Bottom_Left||o==e.Bottom_Center||o==e.Bottom_Right?p-c:(p-c)/2),new createjs.Rectangle(s,a,l,c)},t}();t.Boxer=n}(alm||(alm={}));var alm;!function(t){var e=function(e){function i(i,n){void 0===i&&(i=1e3),void 0===n&&(n=0);var r=e.call(this)||this;return r.timerHandler=function(){r.tStartTime=r.getCurrentTime(),++r.elapsedCount;var e=!1;r.repeatCount>0&&r.elapsedCount>=r.repeatCount?(e=!0,r.stop()):r.tInterval!=r.interval&&r.startInterval(r.interval),r.dispatch(t.TimerEvent.TICK),e&&r.dispatch(t.TimerEvent.COMPLETE)},r.interval=i,r.repeatCount=n,r.isRunning=!1,r.tId=-1,r.reset(),r}return __extends(i,e),i.prototype.start=function(){this.isRunning||(this.isRunning=!0,this.tStartTime=this.getCurrentTime(),this.startInterval(-1!=this.tRestTime?this.tRestTime:this.interval))},i.prototype.stop=function(){this.isRunning&&(this.isRunning=!1,this.tRestTime=this.getCurrentTime()-this.tStartTime,this.stopInterval())},i.prototype.reset=function(){this.stop(),this.elapsedCount=0,this.tRestTime=-1},i.prototype.restart=function(){this.reset(),this.start()},i.prototype.getCurrentTime=function(){return(new Date).valueOf()},i.prototype.startInterval=function(t){this.stopInterval(),this.tInterval=t,this.tId=window.setInterval(this.timerHandler,this.tInterval)},i.prototype.stopInterval=function(){-1!=this.tId&&(clearInterval(this.tId),this.tId=-1)},i.prototype.dispatch=function(e){this.dispatchEvent(new t.TimerEvent(e,!1,!1,this.elapsedCount,this.repeatCount,this.getRestCount()))},i.prototype.getIsRunning=function(){return this.isRunning},i.prototype.getInterval=function(){return this.interval},i.prototype.setInterval=function(t){this.interval=t},i.prototype.getElapsedTime=function(){return this.getCurrentTime()-this.tStartTime},i.prototype.getRestTime=function(){return this.interval-this.getElapsedTime()},i.prototype.getElapsedCount=function(){return this.elapsedCount},i.prototype.getRepeatCount=function(){return this.repeatCount},i.prototype.setRepeatCount=function(t){this.repeatCount=t},i.prototype.getRestCount=function(){return this.repeatCount-this.elapsedCount},i}(createjs.EventDispatcher);t.Timer=e}(alm||(alm={}));var alm;!function(t){var e=function(t){function e(e,i,n,r,o,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0);var a=t.call(this,e,i,n)||this;return a.elapsedCount=r,a.repeatCount=o,a.restCount=s,a}return __extends(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.elapsedCount,this.repeatCount,this.restCount)},e.prototype.toString=function(){return"[TimerEvent (type="+this.type+" elapsedCount="+this.elapsedCount+" repeatCount="+this.repeatCount+" restCount="+this.restCount+")]"},e}(createjs.Event);e.TICK="tick",e.COMPLETE="complete",t.TimerEvent=e}(alm||(alm={}));var alm;!function(t){!function(){function t(){}}();var e=function(){function t(t){}return t.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.eventDispatcher=new createjs.EventDispatcher)},t.start=function(){if(!this.isRunning){this.isRunning=!0,this.initialize(),console.log("[KeyWatcher] start");var t=jQuery(window);t.on("keydown",this.windowKeyDownHandler),t.on("keyup",this.windowKeyUpHandler)}},t.stop=function(){if(this.isRunning){this.isRunning=!1,this.initialize(),console.log("[KeyWatcher] stop");var t=jQuery(window);t.off("keydown",this.windowKeyDownHandler),t.off("keyup",this.windowKeyUpHandler)}},t.addEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.addEventListener(t,e,i)},t.removeEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.removeEventListener(t,e,i)},t.getIsRunning=function(){return this.isRunning},t.getIsAnyKeyPressed=function(){return this.pressedKeyCount>0},t.getIsKeyPressed=function(t){return null!=this.isKeyPressedByKeyCode[t]},t}();e.windowKeyDownHandler=function(i){var n=i.keyCode;null==e.isKeyPressedByKeyCode[n]&&(e.isKeyPressedByKeyCode[n]=!0,++e.pressedKeyCount,e.eventDispatcher.dispatchEvent(new t.KeyWatcherEvent(t.KeyWatcherEvent.KEY_DOWN,!1,!1,i)))},e.windowKeyUpHandler=function(i){var n=i.keyCode;null!=e.isKeyPressedByKeyCode[n]&&(delete e.isKeyPressedByKeyCode[n],--e.pressedKeyCount,e.eventDispatcher.dispatchEvent(new t.KeyWatcherEvent(t.KeyWatcherEvent.KEY_UP,!1,!1,i)))},e.isRunning=!1,e.pressedKeyCount=0,e.isKeyPressedByKeyCode={},e.isInitialized=!1,e.eventDispatcher=null,t.KeyWatcher=e}(alm||(alm={}));var alm;!function(t){var e=function(t){function e(e,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null);var o=t.call(this,e,i,n)||this;return o.jqueryEvent=r,o.key=o.jqueryEvent.key,o.keyCode=o.jqueryEvent.keyCode,o.altKey=o.jqueryEvent.altKey,o.ctrlKey=o.jqueryEvent.ctrlKey,o.shiftKey=o.jqueryEvent.shiftKey,o}return __extends(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.jqueryEvent)},e.prototype.toString=function(){return"[KeyWatcherEvent (type="+this.type+" key="+this.key+")]"},e}(createjs.Event);e.KEY_UP="keyUp",e.KEY_DOWN="keyDown",t.KeyWatcherEvent=e}(alm||(alm={}));var alm;!function(t){!function(t){t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.PauseBreak=19]="PauseBreak",t[t.CapsLock=20]="CapsLock",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.Insert=45]="Insert",t[t.Delete=46]="Delete",t[t.Key0=48]="Key0",t[t.Key1=49]="Key1",t[t.Key2=50]="Key2",t[t.Key3=51]="Key3",t[t.Key4=52]="Key4",t[t.Key5=53]="Key5",t[t.Key6=54]="Key6",t[t.Key7=55]="Key7",t[t.Key8=56]="Key8",t[t.Key9=57]="Key9",t[t.ClosedParen=48]="ClosedParen",t[t.ExclamationMark=49]="ExclamationMark",t[t.AtSign=50]="AtSign",t[t.PoundSign=51]="PoundSign",t[t.Hash=51]="Hash",t[t.DollarSign=52]="DollarSign",t[t.PercentSign=53]="PercentSign",t[t.Caret=54]="Caret",t[t.Hat=54]="Hat",t[t.Ampersand=55]="Ampersand",t[t.Star=56]="Star",t[t.Asterik=56]="Asterik",t[t.OpenParen=57]="OpenParen",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.LeftWindowKey=91]="LeftWindowKey",t[t.RightWindowKey=92]="RightWindowKey",t[t.SelectKey=93]="SelectKey",t[t.Numpad0=96]="Numpad0",t[t.Numpad1=97]="Numpad1",t[t.Numpad2=98]="Numpad2",t[t.Numpad3=99]="Numpad3",t[t.Numpad4=100]="Numpad4",t[t.Numpad5=101]="Numpad5",t[t.Numpad6=102]="Numpad6",t[t.Numpad7=103]="Numpad7",t[t.Numpad8=104]="Numpad8",t[t.Numpad9=105]="Numpad9",t[t.Multiply=106]="Multiply",t[t.Add=107]="Add",t[t.Subtract=109]="Subtract",t[t.DecimalPoint=110]="DecimalPoint",t[t.Divide=111]="Divide",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NumLock=144]="NumLock",t[t.ScrollLock=145]="ScrollLock",t[t.SemiColon=186]="SemiColon",t[t.Equals=187]="Equals",t[t.Comma=188]="Comma",t[t.Dash=189]="Dash",t[t.Period=190]="Period",t[t.UnderScore=189]="UnderScore",t[t.PlusSign=187]="PlusSign",t[t.ForwardSlash=191]="ForwardSlash",t[t.Tilde=192]="Tilde",t[t.GraveAccent=192]="GraveAccent",t[t.OpenBracket=219]="OpenBracket",t[t.ClosedBracket=221]="ClosedBracket",t[t.Quote=222]="Quote"}(t.KeyCode||(t.KeyCode={}))}(alm||(alm={}));var alm;!function(t){!function(){function t(){}}();var e=function(){function t(t){}return t.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.eventDispatcher=new createjs.EventDispatcher)},t.start=function(){this.isRunning||(this.isRunning=!0,this.initialize(),console.log("[ResizeWatcher] start"),jQuery(window).on("resize",this.windowResizeHandler),this.apply())},t.stop=function(){this.isRunning&&(this.isRunning=!1,this.initialize(),console.log("[ResizeWatcher] stop"),jQuery(window).off("resize",this.windowResizeHandler))},t.apply=function(){var e=jQuery(window);t.stageWidth=e.width(),t.stageHeight=e.height();var i=jQuery("body");t.contentWidth=i.width(),t.contentHeight=i.height()},t.addEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.addEventListener(t,e,i)},t.removeEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.removeEventListener(t,e,i)},t.getIsRunning=function(){return this.isRunning},t.getStageWidth=function(){return this.stageWidth},t.getStageHeight=function(){return this.stageHeight},t.getContentWidth=function(){return this.contentWidth},t.getContentHeight=function(){return this.contentHeight},t}();e.windowResizeHandler=function(i){e.apply(),e.eventDispatcher.dispatchEvent(new t.ResizeWatcherEvent(t.ResizeWatcherEvent.RESIZE,!1,!1,i,e.stageWidth,e.stageHeight))},e.isRunning=!1,e.stageWidth=0,e.stageHeight=0,e.contentWidth=0,e.contentHeight=0,e.isInitialized=!1,e.eventDispatcher=null,t.ResizeWatcher=e}(alm||(alm={}));var alm;!function(t){var e=function(t){function e(e,i,n,r,o,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===o&&(o=0),void 0===s&&(s=0);var a=t.call(this,e,i,n)||this;return a.jqueryEvent=r,a.stageWidth=o,a.stageHeight=s,a}return __extends(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.jqueryEvent,this.stageWidth,this.stageHeight)},e.prototype.toString=function(){return"[ResizeWatcherEvent (type="+this.type+" stageWidth="+this.stageWidth+" stageHeight="+this.stageHeight+")]"},e}(createjs.Event);e.RESIZE="resize",t.ResizeWatcherEvent=e}(alm||(alm={}));var alm;!function(t){!function(){function t(){}}();var e=function(){function t(t){}return t.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.eventDispatcher=new createjs.EventDispatcher)},t.start=function(){this.isRunning||(this.isRunning=!0,this.initialize(),console.log("[ScrollWatcher] start"),jQuery(window).on("resize",this.windowScrollHandler),jQuery(window).on("scroll",this.windowScrollHandler),this.apply())},t.stop=function(){this.isRunning&&(this.isRunning=!1,this.initialize(),console.log("[ScrollWatcher] stop"),jQuery(window).off("resize",this.windowScrollHandler),jQuery(window).off("scroll",this.windowScrollHandler))},t.apply=function(){var t=jQuery(window);this.windowHeight=t.height(),this.scrollTop=t.scrollTop(),this.scrollBottom=this.scrollTop+this.windowHeight},t.addEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.addEventListener(t,e,i)},t.removeEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.removeEventListener(t,e,i)},t.calcScrolledPosition=function(t){return t-this.scrollTop},t.calcScrolledPositionRatio=function(t){return this.calcScrolledPosition(t)/this.windowHeight},t.getIsRunning=function(){return this.isRunning},t.getScrollTop=function(){return this.scrollTop},t.getScrollBottom=function(){return this.scrollBottom},t.getWindowHeight=function(){return this.windowHeight},t}();e.windowScrollHandler=function(i){e.apply(),e.eventDispatcher.dispatchEvent(new t.ScrollWatcherEvent(t.ScrollWatcherEvent.SCROLL,!1,!1,i))},e.windowResizeHandler=function(t){e.apply()},e.isRunning=!1,e.windowHeight=0,e.isInitialized=!1,e.eventDispatcher=null,t.ScrollWatcher=e}(alm||(alm={}));var alm;!function(t){var e=function(t){function e(e,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null);var o=t.call(this,e,i,n)||this;return o.jqueryEvent=r,o}return __extends(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.jqueryEvent)},e.prototype.toString=function(){return"[ScrollWatcherEvent (type="+this.type+")]"},e}(createjs.Event);e.SCROLL="scroll",t.ScrollWatcherEvent=e}(alm||(alm={}));var alm;!function(t){!function(){function t(){}}();var e=function(){function t(t){}return t.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.isLoading=!1,this.isLoaded=!1,this.isCanceled=!1,this.loader=new createjs.LoadQueue,this.eventDispatcher=new createjs.EventDispatcher)},t.load=function(){this.isLoading||this.isLoaded||(this.isLoading=!0,this.initialize(),console.log("[AssetLoader] load"),this.setListener(),this.loader.load())},t.addFile=function(t,e){void 0===e&&(e=null),this.initialize(),e?this.loader.loadFile({id:e,src:t}):this.loader.loadFile(t)},t.addFiles=function(t){this.initialize(),this.loader.loadManifest(t)},t.addManifest=function(t){this.initialize(),this.loader.loadManifest(t)},t.cancel=function(){this.isLoading&&(this.isLoading=!1,this.isCanceled=!0,this.initialize(),console.log("[AssetLoader] cancel"),this.loader.cancel())},t.close=function(){(this.isLoading||this.isCanceled)&&(this.isLoading=!1,this.isCanceled=!1,this.initialize(),console.log("[AssetLoader] close"),this.loader.close())},t.clear=function(){this.initialize(),console.log("[AssetLoader] clear"),this.clearListener(),this.loader.destroy(),this.loader=new createjs.LoadQueue},t.addEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.addEventListener(t,e,i)},t.removeEventListener=function(t,e,i){void 0===i&&(i=!1),this.initialize(),this.eventDispatcher.removeEventListener(t,e,i)},t.setListener=function(){this.loader.addEventListener("fileload",this.loaderFileLoadHandler),this.loader.addEventListener("fileerror",this.loaderFileErrorHandler),this.loader.addEventListener("progress",this.loaderProgressHandler),this.loader.addEventListener("error",this.loaderErrorHandler),this.loader.addEventListener("complete",this.loaderCompleteHandler)},t.clearListener=function(){this.loader.removeEventListener("fileload",this.loaderFileLoadHandler),this.loader.removeEventListener("fileerror",this.loaderFileErrorHandler),this.loader.removeEventListener("progress",this.loaderProgressHandler),this.loader.removeEventListener("error",this.loaderErrorHandler),this.loader.removeEventListener("complete",this.loaderCompleteHandler)},t.getIsLoading=function(){return this.isLoading},t.getIsLoaded=function(){return this.isLoaded},t.getIsCanceled=function(){return this.isCanceled},t}();e.loaderFileLoadHandler=function(i){console.log("[AssetLoader] file load : progress = "+i.progress," ("+i.loaded+" / "+i.total),e.eventDispatcher.dispatchEvent(new t.AssetLoaderEvent(t.AssetLoaderEvent.FILE_LOAD,!1,!1,i.progress,i.loaded,i.total,i.result))},e.loaderErrorHandler=function(i){console.log("[AssetLoader] error : title = "+i.title+", message = "+i.message),e.eventDispatcher.dispatchEvent(new t.AssetLoaderEvent(t.AssetLoaderEvent.ERROR))},e.loaderProgressHandler=function(i){console.log("[AssetLoader] progress : progress = "+i.progress," ("+i.loaded+" / "+i.total),e.eventDispatcher.dispatchEvent(new t.AssetLoaderEvent(t.AssetLoaderEvent.PROGRESS,!1,!1,i.progress,i.loaded,i.total))},e.loaderFileErrorHandler=function(i){console.log("[AssetLoader] file error : "+i.error),e.eventDispatcher.dispatchEvent(new t.AssetLoaderEvent(t.AssetLoaderEvent.FILE_ERROR,!1,!1,i.progress,i.loaded,i.total))},e.loaderCompleteHandler=function(i){console.log("[AssetLoader] complete"),e.eventDispatcher.dispatchEvent(new t.AssetLoaderEvent(t.AssetLoaderEvent.COMPLETE,!1,!1,i.progress,i.loaded,i.total))},e.isInitialized=!1,e.eventDispatcher=null,t.AssetLoader=e}(alm||(alm={}));var alm;!function(t){var e=function(t){function e(e,i,n,r,o,s,a){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=null);var l=t.call(this,e,i,n)||this;return l.progress=r,l.loadedCount=o,l.totalCount=s,l.content=a,l}return __extends(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.progress,this.loadedCount,this.totalCount,this.content)},e.prototype.toString=function(){return"[AssetLoaderEvent (type="+this.type+" progress="+this.progress+"loadedCount="+this.loadedCount+" totalCount="+this.totalCount+")]"},e}(createjs.Event);e.FILE_LOAD="fileload",e.FILE_ERROR="fileerror",e.PROGRESS="progress",e.COMPLETE="complete",e.ERROR="error",t.AssetLoaderEvent=e}(alm||(alm={}));var alm;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.view=e,i.isInitializing=!1,i.isInitialized=!1,i.isReady=!1,i.isShowing=!1,i.isShown=!0,i.isHiding=!1,i.autoHideWithInit=!0,i}return __extends(e,t),e.prototype.initialize=function(){this.isInitializing||this.isInitialized||(this.isInitializing=!0,this.view=this.implInitialize(),this.throwError("view is null",!this.view),this.hide(!1),this.isInitializing=!1,this.isInitialized=!0)},e.prototype.ready=function(){this.throwError("ready() was called without being initialized",!this.isInitialized),this.implReady(),this.isReady=!0},e.prototype.finalize=function(){this.implFinalize()},e.prototype.show=function(t){void 0===t&&(t=!0),this.isShown||this.getShowCommand(t).execute()},e.prototype.hide=function(t){void 0===t&&(t=!0),this.isShown&&this.getHideCommand(t).execute()},e.prototype.getShowCommand=function(t){var e=this;void 0===t&&(t=!0);var i=new JPP.Serial;return i.addCommand(new JPP.Func(function(){e.isShown||(e.throwError("getShowCommand() was called without being initialized",!e.isInitialized),e.throwError("getShowCommand() was called without being ready",!e.isReady),e.isShown=!0,e.isShowing=!0,e.hideCommand&&e.hideCommand.interrupt(),e.showCommand=i,i.insertCommand(e.implShow(e.view,t),new JPP.Func(function(){e.showCommand=null,e.isShowing=!1})))})),i},e.prototype.getHideCommand=function(t){var e=this;void 0===t&&(t=!0);var i=new JPP.Serial;return i.addCommand(new JPP.Func(function(){e.isShown&&(e.isInitializing||(e.throwError("getHideCommand() was called without being initialized",!e.isInitialized),e.throwError("getHideCommand() was called without being ready",!e.isReady)),e.isShown=!1,e.isHiding=!0,e.showCommand&&e.showCommand.interrupt(),e.hideCommand=i,i.insertCommand(e.implHide(e.view,t),new JPP.Func(function(){e.hideCommand=null,e.isHiding=!1})))})),i},e.prototype.throwError=function(t,e){if(void 0===e&&(e=!0),e)throw new Error("[View] ERROR : "+t)},e.prototype.getIsInitializing=function(){return this.isInitializing},e.prototype.getIsInitialized=function(){return this.isInitialized},e.prototype.getIsReady=function(){return this.isReady},e.prototype.getIsShowing=function(){return this.isShowing},e.prototype.getIsShown=function(){return this.isShown},e.prototype.getIsHiding=function(){return this.isHiding},e.prototype.getIsHidden=function(){return!this.isShown},e.prototype.getView=function(){return this.view},e.prototype.getAutoHideWithInit=function(){return this.autoHideWithInit},e.prototype.setAutoHideWithInit=function(t){this.autoHideWithInit=t},e}(createjs.EventDispatcher);t.View=e}(alm||(alm={}));var alm;!function(t){var e=function(t){function e(e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)||this}return __extends(e,t),e.prototype.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},e.prototype.toString=function(){return"[ViewEvent (type="+this.type+")]"},e}(createjs.Event);e.INIT="init",t.ViewEvent=e}(alm||(alm={}));var project;!function(t){var e=function(){function t(){}return t}();e.DEBUG_MODE=!0,e.DEFAULT_STAGE_W=1920,e.DEFAULT_STAGE_H=1080,e.FPS=60,t.Config=e}(project||(project={}));var project;!function(t){var e=function(){function e(){var t=this;this.tickerHandler=function(e){t.update()},this.resizeWatcherResizeHandler=function(e){t.resize()},this.scrollWatcherResizeHandler=function(t){},this.keyWatcherResizeHandler=function(t){console.log("[Application] key down : '"+t.key+"'")}}return e.prototype.run=function(){console.log("[Application] run"),this.$canvas=jQuery("#stage"),this.stage=new createjs.Stage(this.$canvas.get(0)),createjs.Ticker.framerate=t.Config.FPS,createjs.Ticker.addEventListener("tick",this.tickerHandler),t.Config.DEBUG_MODE&&(this.stats=new Stats,jQuery("body").append(this.stats.domElement)),this.screen=new t.Screen,this.stage.addChild(this.screen.getView()),alm.ResizeWatcher.addEventListener(alm.ResizeWatcherEvent.RESIZE,this.resizeWatcherResizeHandler),alm.ScrollWatcher.addEventListener(alm.ScrollWatcherEvent.SCROLL,this.scrollWatcherResizeHandler),alm.KeyWatcher.addEventListener(alm.KeyWatcherEvent.KEY_DOWN,this.keyWatcherResizeHandler),this.load()},e.prototype.load=function(){alm.ResizeWatcher.apply(),alm.ScrollWatcher.apply(),this.screen.ready(),this.screen.show(),this.$canvas.css({display:"block"}),alm.ResizeWatcher.start(),alm.ScrollWatcher.start(),alm.KeyWatcher.start(),this.resizeWatcherResizeHandler(null),this.tickerHandler(null)},e.prototype.update=function(){t.Config.DEBUG_MODE&&this.stats.begin(),this.stage.update(),t.Config.DEBUG_MODE&&this.stats.end()},e.prototype.resize=function(){var t=alm.ResizeWatcher.getStageWidth(),e=alm.ResizeWatcher.getStageHeight();this.$canvas.attr({width:t,height:e}),this.$canvas.css({width:t,height:e})},e}();t.Application=e}(project||(project={}));var project;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initialize(),t}return __extends(i,e),i.prototype.implInitialize=function(){var e=new createjs.Container;return this.background=new t.Background,e.addChild(this.background.getView()),this.foreground=new t.Foreground,e.addChild(this.foreground.getView()),e},i.prototype.implReady=function(){this.background.ready(),this.foreground.ready()},i.prototype.implFinalize=function(){this.foreground.finalize(),this.background.finalize()},i.prototype.implShow=function(t,e){return new JPP.Serial(new JPP.Func(function(){t.visible=!0}),new JPP.Parallel(this.foreground.getShowCommand(e),this.background.getShowCommand(e)))},i.prototype.implHide=function(t,e){return new JPP.Serial(new JPP.Parallel(this.foreground.getHideCommand(e),this.background.getHideCommand(e)),new JPP.Func(function(){t.visible=!1}))},i}(alm.View);t.Screen=e}(project||(project={}));var project;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initialize(),t}return __extends(i,e),i.prototype.implInitialize=function(){var e=new createjs.Container;this.circles=[];for(var i,n=0;n<100;++n)i=new t.Circle,e.addChild(i.getView()),this.circles.push(i);return e},i.prototype.implReady=function(){for(var t=this.circles.length,e=0;e<t;++e)this.circles[e].ready()},i.prototype.implFinalize=function(){for(var t=this.circles.length,e=0;e<t;++e)this.circles[e].finalize()},i.prototype.implShow=function(t,e){var i=this;return new JPP.Serial(new JPP.Func(function(){for(var t=i.circles.length,n=0;n<t;++n)i.circles[n].show(e)}),alm.CommandUtil.fadeIn(t,e?1:0,JPP.Easing.easeOutQuart,!1))},i.prototype.implHide=function(t,e){var i=this;return new JPP.Serial(new JPP.Func(function(){for(var t=i.circles.length,n=0;n<t;++n)i.circles[n].hide(e)}),alm.CommandUtil.fadeOut(t,e?1:0,JPP.Easing.easeOutQuart,!1))},i}(alm.View);t.Background=e}(project||(project={}));var project;!function(t){var e=alm.ScrollWatcher,i=function(t){function i(){var i=t.call(this)||this;return i.scrollWatcherScrollHandler=function(t){i.getView().y=e.calcScrolledPosition(i.offsetY);var n=e.calcScrolledPositionRatio(i.offsetY);n>=0&&n<=1?i.show():i.hide()},i.initialize(),i}return __extends(i,t),i.prototype.implInitialize=function(){var t=new createjs.Shape;this.radius=alm.Num.random(50,100);var e=t.graphics;return e.beginFill("#"+("000000"+Math.floor(16777215*Math.random())).substr(-6,6)),e.drawCircle(0,0,this.radius),e.endFill(),t},i.prototype.implReady=function(){alm.ScrollWatcher.addEventListener(alm.ScrollWatcherEvent.SCROLL,this.scrollWatcherScrollHandler),this.offsetX=alm.Num.random(this.radius,alm.ResizeWatcher.getContentWidth()-this.radius),this.offsetY=alm.Num.random(this.radius,alm.ResizeWatcher.getContentHeight()-this.radius);var t=this.getView();t.x=this.offsetX,t.y=this.offsetY},i.prototype.implFinalize=function(){alm.ScrollWatcher.removeEventListener(alm.ScrollWatcherEvent.SCROLL,this.scrollWatcherScrollHandler)},i.prototype.implShow=function(t,e){return new JPP.Func(function(){t.alpha=1})},i.prototype.implHide=function(t,e){return new JPP.Func(function(){t.alpha=.2})},i}(alm.View);t.Circle=i}(project||(project={}));var project;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.initialize(),e}return __extends(e,t),e.prototype.implInitialize=function(){return new createjs.Container},e.prototype.implReady=function(){},e.prototype.implFinalize=function(){},e.prototype.implShow=function(t,e){return alm.CommandUtil.fadeIn(t,e?1:0,JPP.Easing.easeOutQuart,!1)},e.prototype.implHide=function(t,e){return alm.CommandUtil.fadeOut(t,e?1:0,JPP.Easing.easeOutQuart,!1)},e}(alm.View);t.Foreground=e}(project||(project={}));var project;!function(t){(new t.Application).run()}(project||(project={}));
//# sourceMappingURL=main.js.map
