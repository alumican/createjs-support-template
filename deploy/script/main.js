var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),project;!function(t){var e=function(){return function(){}}();e.DEBUG_MODE=!0,e.DEFAULT_STAGE_W=1920,e.DEFAULT_STAGE_H=1080,e.FPS=60,t.Config=e}(project||(project={}));var project;!function(t){var e=function(){function e(){var t=this;this.tickerHandler=function(e){t.update()},this.resizeWatcherResizeHandler=function(e){t.resize()},this.scrollWatcherResizeHandler=function(t){},this.keyWatcherResizeHandler=function(t){console.log("[Application] key down : '"+t.key+"'")}}return e.prototype.run=function(){console.log("[Application] run"),this.$canvas=jQuery("#stage"),this.stage=new createjs.Stage(this.$canvas.get(0)),createjs.Ticker.framerate=t.Config.FPS,createjs.Ticker.addEventListener("tick",this.tickerHandler),t.Config.DEBUG_MODE&&(this.stats=new Stats,jQuery("body").append(this.stats.domElement)),this.screen=new t.Screen,this.stage.addChild(this.screen.getView()),alm.ResizeWatcher.addEventListener(alm.ResizeWatcherEvent.RESIZE,this.resizeWatcherResizeHandler),alm.ScrollWatcher.addEventListener(alm.ScrollWatcherEvent.SCROLL,this.scrollWatcherResizeHandler),alm.KeyWatcher.addEventListener(alm.KeyWatcherEvent.KEY_DOWN,this.keyWatcherResizeHandler),this.load()},e.prototype.load=function(){alm.ResizeWatcher.apply(),alm.ScrollWatcher.apply(),this.screen.ready(),this.screen.show(),this.$canvas.css({display:"block"}),alm.ResizeWatcher.start(),alm.ScrollWatcher.start(),alm.KeyWatcher.start(),this.resizeWatcherResizeHandler(null),this.tickerHandler(null)},e.prototype.update=function(){t.Config.DEBUG_MODE&&this.stats.begin(),this.stage.update(),t.Config.DEBUG_MODE&&this.stats.end()},e.prototype.resize=function(){var t=alm.ResizeWatcher.getStageWidth(),e=alm.ResizeWatcher.getStageHeight();this.$canvas.attr({width:t,height:e}),this.$canvas.css({width:t,height:e})},e}();t.Application=e}(project||(project={}));var project;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initialize(),t}return __extends(i,e),i.prototype.implInitialize=function(){var e=new createjs.Container;return this.background=new t.Background,e.addChild(this.background.getView()),this.foreground=new t.Foreground,e.addChild(this.foreground.getView()),e},i.prototype.implReady=function(){this.background.ready(),this.foreground.ready()},i.prototype.implFinalize=function(){this.foreground.finalize(),this.background.finalize()},i.prototype.implShow=function(t,e){return new cmd.Serial(new cmd.Func(function(){t.visible=!0}),new cmd.Parallel(this.foreground.getShowCommand(e),this.background.getShowCommand(e)))},i.prototype.implHide=function(t,e){return new cmd.Serial(new cmd.Parallel(this.foreground.getHideCommand(e),this.background.getHideCommand(e)),new cmd.Func(function(){t.visible=!1}))},i}(alm.View);t.Screen=e}(project||(project={}));var project;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.initialize(),t}return __extends(i,e),i.prototype.implInitialize=function(){var e=new createjs.Container;this.circles=[];for(var i,r=0;r<100;++r)i=new t.Circle,e.addChild(i.getView()),this.circles.push(i);return e},i.prototype.implReady=function(){for(var t=this.circles.length,e=0;e<t;++e)this.circles[e].ready()},i.prototype.implFinalize=function(){for(var t=this.circles.length,e=0;e<t;++e)this.circles[e].finalize()},i.prototype.implShow=function(t,e){var i=this;return new cmd.Serial(new cmd.Func(function(){for(var t=i.circles.length,r=0;r<t;++r)i.circles[r].show(e)}),alm.CommandUtil.fadeIn(t,e?1:0,cmd.Easing.easeOutQuart,!1))},i.prototype.implHide=function(t,e){var i=this;return new cmd.Serial(new cmd.Func(function(){for(var t=i.circles.length,r=0;r<t;++r)i.circles[r].hide(e)}),alm.CommandUtil.fadeOut(t,e?1:0,cmd.Easing.easeOutQuart,!1))},i}(alm.View);t.Background=e}(project||(project={}));var project;!function(t){var e=alm.ScrollWatcher,i=function(t){function i(){var i=t.call(this)||this;return i.scrollWatcherScrollHandler=function(t){i.getView().y=e.calcScrolledPosition(i.offsetY);var r=e.calcScrolledPositionRatio(i.offsetY);r>=0&&r<=1?i.show():i.hide()},i.initialize(),i}return __extends(i,t),i.prototype.implInitialize=function(){var t=new createjs.Shape;this.radius=alm.Num.random(50,100);var e=t.graphics;return e.beginFill("#"+("000000"+Math.floor(16777215*Math.random())).substr(-6,6)),e.drawCircle(0,0,this.radius),e.endFill(),t},i.prototype.implReady=function(){alm.ScrollWatcher.addEventListener(alm.ScrollWatcherEvent.SCROLL,this.scrollWatcherScrollHandler),this.offsetX=alm.Num.random(this.radius,alm.ResizeWatcher.getContentWidth()-this.radius),this.offsetY=alm.Num.random(this.radius,alm.ResizeWatcher.getContentHeight()-this.radius);var t=this.getView();t.x=this.offsetX,t.y=this.offsetY},i.prototype.implFinalize=function(){alm.ScrollWatcher.removeEventListener(alm.ScrollWatcherEvent.SCROLL,this.scrollWatcherScrollHandler)},i.prototype.implShow=function(t,e){return new cmd.Func(function(){t.alpha=1})},i.prototype.implHide=function(t,e){return new cmd.Func(function(){t.alpha=.2})},i}(alm.View);t.Circle=i}(project||(project={}));var project;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.initialize(),e}return __extends(e,t),e.prototype.implInitialize=function(){return new createjs.Container},e.prototype.implReady=function(){},e.prototype.implFinalize=function(){},e.prototype.implShow=function(t,e){return alm.CommandUtil.fadeIn(t,e?1:0,cmd.Easing.easeOutQuart,!1)},e.prototype.implHide=function(t,e){return alm.CommandUtil.fadeOut(t,e?1:0,cmd.Easing.easeOutQuart,!1)},e}(alm.View);t.Foreground=e}(project||(project={}));var project;(new(project||(project={})).Application).run();
//# sourceMappingURL=main.js.map
