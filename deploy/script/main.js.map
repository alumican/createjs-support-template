{"version":3,"sources":["../deploy/lib/createjs-support/src/util/Num.ts","../deploy/lib/createjs-support/src/util/CommandUtil.ts","../deploy/lib/createjs-support/src/util/AnimateUtil.ts","../deploy/lib/createjs-support/src/util/Boxer.ts","../deploy/lib/createjs-support/src/job/Timer.ts","../deploy/lib/createjs-support/src/event/TimerEvent.ts","../deploy/lib/createjs-support/src/job/KeyWatcher.ts","../deploy/lib/createjs-support/src/event/KeyWatcherEvent.ts","../deploy/lib/createjs-support/src/var/KeyCode.ts","../deploy/lib/createjs-support/src/job/ResizeWatcher.ts","../deploy/lib/createjs-support/src/event/ResizeWatcherEvent.ts","../deploy/lib/createjs-support/src/job/ScrollWatcher.ts","../deploy/lib/createjs-support/src/event/ScrollWatcherEvent.ts","../deploy/lib/createjs-support/src/job/AssetLoader.ts","../deploy/lib/createjs-support/src/event/AssetLoaderEvent.ts","../deploy/lib/createjs-support/src/view/View.ts","../deploy/lib/createjs-support/src/event/ViewEvent.ts","../src/script/var/Config.ts","../src/script/job/Application.ts","../src/script/view/Screen.ts","../src/script/view/background/Background.ts","../src/script/view/background/Circle.ts","../src/script/view/foreground/Foreground.ts","../src/script/main.ts"],"names":["alm","Num","map","value","srcMin","srcMax","dstMin","dstMax","random","min","max","Math","PI","PI2","PI_2","PI_3","PI_4","PI_6","RAD2DEG","DEG2RAD","CommandUtil","stop","command","interrupt","fadeTo","target","opacity","duration","easing","execute","tween","JPP","Tween","alpha","visible","fadeIn","fadeOut","AnimateUtil","getLinkageMovieClip","linkageId","window","getChildByName","parent","childName","Align","ScaleMode","Boxer","resize","bounds","scaleMode","align","ShowAll","Middle_Center","tx","x","ty","y","tw","width","th","height","bx","by","bw","bh","NoBorder","ratioW","ratioH","ratio","ExactFit","createjs","Rectangle","Top_Left","Middle_Left","Bottom_Left","Top_Right","Middle_Right","Bottom_Right","Top_Center","Bottom_Center","Timer","_super","interval","repeatCount","_this","call","this","timerHandler","tStartTime","getCurrentTime","elapsedCount","isCompleted","tInterval","startInterval","dispatch","TimerEvent","TICK","COMPLETE","isRunning","tId","reset","__extends","prototype","start","tRestTime","stopInterval","restart","Date","valueOf","setInterval","clearInterval","eventType","dispatchEvent","getRestCount","getIsRunning","getInterval","getElapsedTime","getRestTime","getElapsedCount","getRepeatCount","setRepeatCount","count","EventDispatcher","bubbles","cancelable","restCount","clone","type","toString","Event","SingletonEnforcer","KeyWatcher","pvt","initialize","isInitialized","eventDispatcher","console","log","$window","jQuery","on","windowKeyDownHandler","windowKeyUpHandler","off","addEventListener","listener","useCapture","removeEventListener","getIsAnyKeyPressed","pressedKeyCount","getIsKeyPressed","keyCode","isKeyPressedByKeyCode","event","KeyWatcherEvent","KEY_DOWN","KEY_UP","jqueryEvent","key","altKey","ctrlKey","shiftKey","KeyCode","ResizeWatcher","windowResizeHandler","apply","stageWidth","stageHeight","$body","contentWidth","contentHeight","getStageWidth","getStageHeight","getContentWidth","getContentHeight","ResizeWatcherEvent","RESIZE","ScrollWatcher","windowScrollHandler","windowHeight","scrollTop","scrollBottom","calcScrolledPosition","calcScrolledPositionRatio","getScrollTop","getScrollBottom","getWindowHeight","ScrollWatcherEvent","SCROLL","AssetLoader","isLoading","isLoaded","isCanceled","loader","LoadQueue","load","setListener","addFile","filePath","id","loadFile","src","addFiles","files","loadManifest","addManifest","jsonPath","cancel","close","clear","clearListener","destroy","loaderFileLoadHandler","loaderFileErrorHandler","loaderProgressHandler","loaderErrorHandler","loaderCompleteHandler","getIsLoading","getIsLoaded","getIsCanceled","progress","loaded","total","AssetLoaderEvent","FILE_LOAD","result","title","message","ERROR","PROGRESS","error","FILE_ERROR","loadedCount","totalCount","content","View","view","isInitializing","isReady","isShowing","isShown","isHiding","autoHideWithInit","implInitialize","throwError","hide","ready","implReady","finalize","implFinalize","show","useTransition","getShowCommand","getHideCommand","Serial","addCommand","Func","hideCommand","showCommand","insertCommand","implShow","implHide","condition","Error","getIsInitializing","getIsInitialized","getIsReady","getIsShowing","getIsShown","getIsHiding","getIsHidden","getView","getAutoHideWithInit","setAutoHideWithInit","ViewEvent","INIT","project","Config","DEBUG_MODE","DEFAULT_STAGE_W","DEFAULT_STAGE_H","FPS","Application","tickerHandler","update","resizeWatcherResizeHandler","scrollWatcherResizeHandler","keyWatcherResizeHandler","run","$canvas","stage","Stage","get","Ticker","framerate","stats","Stats","append","domElement","screen","Screen","addChild","css","display","begin","end","attr","Container","background","Background","foreground","Foreground","Parallel","circles","circle","i","Circle","push","numCircle","length","Easing","easeOutQuart","scrollWatcherScrollHandler","offsetY","scrolledPositionRatio","Shape","radius","g","graphics","beginFill","floor","substr","drawCircle","endFill","offsetX"],"mappings":"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","file":"main.js","sourcesContent":["/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport class Num {\n\n\t\tpublic static map(value:number, srcMin:number, srcMax:number, dstMin:number, dstMax:number):number\n\t\t{\n\t\t\tif (srcMin == srcMax) return dstMin;\n\t\t\tif (srcMin < srcMax) {\n\t\t\t\tvalue = value < srcMin ? srcMin : value > srcMax ? srcMax : value;\n\t\t\t} else {\n\t\t\t\tvalue = value < srcMax ? srcMax : value > srcMin ? srcMin : value;\n\t\t\t}\n\t\t\treturn (value - srcMin) * (dstMax - dstMin) / (srcMax - srcMin) + dstMin;\n\t\t}\n\n\t\tpublic static random(min:number = 0, max:number = 1):number\n\t\t{\n\t\t\treturn min + (max - min) * Math.random();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONST\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static PI:number = Math.PI;\n\t\tpublic static PI2:number = Num.PI * 2;\n\t\tpublic static PI_2:number = Num.PI / 2;\n\t\tpublic static PI_3:number = Num.PI / 3;\n\t\tpublic static PI_4:number = Num.PI / 4;\n\t\tpublic static PI_6:number = Num.PI / 6;\n\n\t\tpublic static RAD2DEG:number = 180 / Num.PI;\n\t\tpublic static DEG2RAD:number = Num.PI / 180;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport class CommandUtil {\n\n\t\tpublic static stop(command:JPP.Command):any {\n\t\t\tif (command) command.interrupt();\n\t\t\treturn null;\n\t\t}\n\n\t\tpublic static fadeTo(target:createjs.DisplayObject, opacity:number, duration:number, easing:Function, execute:boolean = true):JPP.Tween {\n\t\t\tconst tween:JPP.Tween = new JPP.Tween(target, { alpha: opacity }, null, duration, easing, ():void => {\n\t\t\t\tif (opacity > 0) target.visible = true;\n\t\t\t}, null, ():void => {\n\t\t\t\tif (opacity <= 0) target.visible = false;\n\t\t\t});\n\t\t\tif (execute) tween.execute();\n\t\t\treturn tween;\n\t\t}\n\n\t\tpublic static fadeIn(target:createjs.DisplayObject, duration:number, easing:Function, execute:boolean = true):JPP.Tween {\n\t\t\treturn CommandUtil.fadeTo(target, 1, duration, easing, execute);\n\t\t}\n\n\t\tpublic static fadeOut(target:createjs.DisplayObject, duration:number, easing:Function, execute:boolean = true):JPP.Tween {\n\t\t\treturn CommandUtil.fadeTo(target, 0, duration, easing, execute);\n\t\t}\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport class AnimateUtil {\n\n\t\tpublic static getLinkageMovieClip(linkageId:string):createjs.MovieClip {\n\t\t\treturn new window[\"lib\"][linkageId]();\n\t\t}\n\n\t\tpublic static getChildByName(parent:createjs.Container, childName:string):createjs.DisplayObject {\n\t\t\treturn <createjs.DisplayObject>parent[childName];\n\t\t}\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule alm {\n\n\texport enum Align {\n\t\tTop_Left,\n\t\tTop_Center,\n\t\tTop_Right,\n\t\tMiddle_Left,\n\t\tMiddle_Center,\n\t\tMiddle_Right,\n\t\tBottom_Left,\n\t\tBottom_Center,\n\t\tBottom_Right\n\t}\n\n\texport enum ScaleMode {\n\t\tExactFit,\n\t\tShowAll,\n\t\tNoBorder,\n\t\tNoScale,\n\t}\n\n\texport class Boxer {\n\n\t\tpublic static resize(target:createjs.Rectangle, bounds:createjs.Rectangle, scaleMode:ScaleMode = ScaleMode.ShowAll, align:Align = Align.Middle_Center):createjs.Rectangle {\n\t\t\tlet tx:number = target.x;\n\t\t\tlet ty:number = target.y;\n\t\t\tlet tw:number = target.width;\n\t\t\tlet th:number = target.height;\n\n\t\t\tconst bx:number = bounds.x;\n\t\t\tconst by:number = bounds.y;\n\t\t\tconst bw:number = bounds.width;\n\t\t\tconst bh:number = bounds.height;\n\n\t\t\tswitch (scaleMode) {\n\t\t\t\tcase ScaleMode.ShowAll:\n\t\t\t\tcase ScaleMode.NoBorder:\n\t\t\t\t\tconst ratioW:number = bw / tw;\n\t\t\t\t\tconst ratioH:number = bh / th;\n\t\t\t\t\tconst ratio:number = scaleMode == ScaleMode.ShowAll ? (ratioW < ratioH ? ratioW : ratioH) : (ratioW > ratioH ? ratioW : ratioH);\n\t\t\t\t\ttw *= ratio;\n\t\t\t\t\tth *= ratio;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ScaleMode.ExactFit:\n\t\t\t\t\treturn new createjs.Rectangle(bx, by, bw, bh);\n\t\t\t}\n\n\t\t\ttx = bx + ((align == Align.Top_Left    || align == Align.Middle_Left    || align == Align.Bottom_Left  ) ? 0 :\n\t\t\t           (align == Align.Top_Right   || align == Align.Middle_Right   || align == Align.Bottom_Right ) ? (bw - tw) : (bw - tw) / 2);\n\t\t\tty = by + ((align == Align.Top_Left    || align == Align.Top_Center     || align == Align.Top_Right    ) ? 0 :\n\t\t\t           (align == Align.Bottom_Left || align == Align.Bottom_Center  || align == Align.Bottom_Right ) ? (bh - th) : (bh - th) / 2);\n\n\t\t\treturn new createjs.Rectangle(tx, ty, tw, th);\n\t\t}\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class Timer extends createjs.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(interval:number = 1000, repeatCount:number = 0) {\n\t\t\tsuper();\n\t\t\tthis.interval = interval;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tId = -1;\n\t\t\tthis.reset();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\tthis.startInterval(this.tRestTime != -1 ? this.tRestTime : this.interval);\n\t\t}\n\n\t\tpublic stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\t\t\tthis.tRestTime = this.getCurrentTime() - this.tStartTime;\n\t\t\tthis.stopInterval();\n\t\t}\n\n\t\tpublic reset():void {\n\t\t\tthis.stop();\n\t\t\tthis.elapsedCount = 0;\n\t\t\tthis.tRestTime = -1;\n\t\t}\n\n\t\tpublic restart():void {\n\t\t\tthis.reset();\n\t\t\tthis.start();\n\t\t}\n\n\n\n\n\n\t\tprivate getCurrentTime():number {\n\t\t\treturn new Date().valueOf();\n\t\t}\n\n\t\tprivate startInterval(interval:number):void {\n\t\t\tthis.stopInterval();\n\t\t\tthis.tInterval = interval;\n\t\t\tthis.tId = window.setInterval(this.timerHandler, this.tInterval);\n\t\t}\n\n\t\tprivate stopInterval():void {\n\t\t\tif (this.tId != -1) {\n\t\t\t\tclearInterval(this.tId);\n\t\t\t\tthis.tId = -1;\n\t\t\t}\n\t\t}\n\n\t\tprivate dispatch(eventType:string):void {\n\t\t\tthis.dispatchEvent(new TimerEvent(eventType, false, false, this.elapsedCount, this.repeatCount, this.getRestCount()));\n\t\t}\n\n\t\tprivate timerHandler = ():void => {\n\t\t\tthis.tStartTime = this.getCurrentTime();\n\t\t\t++this.elapsedCount;\n\t\t\tlet isCompleted:boolean = false;\n\t\t\tif (this.repeatCount > 0 && this.elapsedCount >= this.repeatCount) {\n\t\t\t\tisCompleted = true;\n\t\t\t\tthis.stop();\n\t\t\t} else if (this.tInterval != this.interval) {\n\t\t\t\tthis.startInterval(this.interval);\n\t\t\t}\n\t\t\tthis.dispatch(TimerEvent.TICK);\n\t\t\tif (isCompleted) {\n\t\t\t\tthis.dispatch(TimerEvent.COMPLETE);\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsRunning():boolean { return this.isRunning; }\n\t\tprivate isRunning:boolean;\n\n\t\tpublic getInterval():number { return this.interval; }\n\t\tpublic setInterval(interval:number):void { this.interval = interval; }\n\t\tprivate interval:number;\n\n\t\tpublic getElapsedTime():number { return this.getCurrentTime() - this.tStartTime; }\n\n\t\tpublic getRestTime():number { return this.interval - this.getElapsedTime(); }\n\n\t\tpublic getElapsedCount():number { return this.elapsedCount; }\n\t\tprivate elapsedCount:number;\n\n\t\tpublic getRepeatCount():number { return this.repeatCount; }\n\t\tpublic setRepeatCount(count:number):void { this.repeatCount = count; }\n\t\tprivate repeatCount:number;\n\n\t\tpublic getRestCount():number { return this.repeatCount - this.elapsedCount; }\n\n\t\tprivate tStartTime:number;\n\t\tprivate tRestTime:number;\n\t\tprivate tInterval:number;\n\t\tprivate tId:number;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class TimerEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static TICK:string = \"tick\";\n\t\tpublic static COMPLETE:string = \"complete\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, elapsedCount:number = 0, repeatCount:number = 0, restCount:number = 0) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.elapsedCount = elapsedCount;\n\t\t\tthis.repeatCount = repeatCount;\n\t\t\tthis.restCount = restCount;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():ViewEvent {\n\t\t\treturn new TimerEvent(this.type, this.bubbles, this.cancelable, this.elapsedCount, this.repeatCount, this.restCount);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[TimerEvent (type=\" + this.type + \" elapsedCount=\" + this.elapsedCount + \" repeatCount=\" + this.repeatCount + \" restCount=\" + this.restCount + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic elapsedCount:number;\n\t\tpublic repeatCount:number;\n\t\tpublic restCount:number;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\tclass SingletonEnforcer {\n\t}\n\n\texport class KeyWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(pvt:SingletonEnforcer) {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[KeyWatcher] start\");\n\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\t$window.on(\"keydown\", this.windowKeyDownHandler);\n\t\t\t$window.on(\"keyup\", this.windowKeyUpHandler);\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[KeyWatcher] stop\");\n\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\t$window.off(\"keydown\", this.windowKeyDownHandler);\n\t\t\t$window.off(\"keyup\", this.windowKeyUpHandler);\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:KeyWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowKeyDownHandler = (event:JQueryKeyEventObject):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] == null) {\n\t\t\t\tKeyWatcher.isKeyPressedByKeyCode[keyCode] = true;\n\t\t\t\t++KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_DOWN, false, false, event));\n\t\t\t}\n\t\t};\n\n\t\tprivate static windowKeyUpHandler = (event:JQueryKeyEventObject):void => {\n\t\t\tconst keyCode:number = event.keyCode;\n\t\t\tif (KeyWatcher.isKeyPressedByKeyCode[keyCode] != null) {\n\t\t\t\tdelete KeyWatcher.isKeyPressedByKeyCode[keyCode];\n\t\t\t\t--KeyWatcher.pressedKeyCount;\n\t\t\t\tKeyWatcher.eventDispatcher.dispatchEvent(new KeyWatcherEvent(KeyWatcherEvent.KEY_UP, false, false, event));\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getIsAnyKeyPressed():boolean { return this.pressedKeyCount > 0; }\n\t\tprivate static pressedKeyCount:number = 0;\n\n\t\tpublic static getIsKeyPressed(keyCode:number):boolean { return this.isKeyPressedByKeyCode[keyCode] != null; }\n\t\tprivate static isKeyPressedByKeyCode:Hash<boolean> = {};\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class KeyWatcherEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic KEY_UP:string = \"keyUp\";\n\t\tstatic KEY_DOWN:string = \"keyDown\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, jqueryEvent:JQueryKeyEventObject = null) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.jqueryEvent = jqueryEvent;\n\t\t\tthis.key = this.jqueryEvent.key;\n\t\t\tthis.keyCode = this.jqueryEvent.keyCode;\n\t\t\tthis.altKey = this.jqueryEvent.altKey;\n\t\t\tthis.ctrlKey = this.jqueryEvent.ctrlKey;\n\t\t\tthis.shiftKey = this.jqueryEvent.shiftKey;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():KeyWatcherEvent {\n\t\t\treturn new KeyWatcherEvent(this.type, this.bubbles, this.cancelable, this.jqueryEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[KeyWatcherEvent (type=\" + this.type + \" key=\" + this.key + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic jqueryEvent:JQueryKeyEventObject;\n\t\tpublic key:string;\n\t\tpublic keyCode:number;\n\t\tpublic altKey:boolean;\n\t\tpublic ctrlKey:boolean;\n\t\tpublic shiftKey:boolean;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\n// Original\n// https://github.com/nfriend/ts-keycode-enum\n// License MIT\n\nnamespace alm {\n\n\texport enum KeyCode {\n\n\t\tBackspace = 8,\n\t\tTab = 9,\n\t\tEnter = 13,\n\t\tShift = 16,\n\t\tCtrl = 17,\n\t\tAlt = 18,\n\t\tPauseBreak = 19,\n\t\tCapsLock = 20,\n\t\tEscape = 27,\n\t\tSpace = 32,\n\t\tPageUp = 33,\n\t\tPageDown = 34,\n\t\tEnd = 35,\n\t\tHome = 36,\n\n\t\tLeftArrow = 37,\n\t\tUpArrow = 38,\n\t\tRightArrow = 39,\n\t\tDownArrow = 40,\n\n\t\tInsert = 45,\n\t\tDelete = 46,\n\n\t\tKey0 = 48,\n\t\tKey1 = 49,\n\t\tKey2 = 50,\n\t\tKey3 = 51,\n\t\tKey4 = 52,\n\t\tKey5 = 53,\n\t\tKey6 = 54,\n\t\tKey7 = 55,\n\t\tKey8 = 56,\n\t\tKey9 = 57,\n\n\t\tClosedParen = Key0,\n\t\tExclamationMark = Key1,\n\t\tAtSign = Key2,\n\t\tPoundSign = Key3,\n\t\tHash = PoundSign,\n\t\tDollarSign = Key4,\n\t\tPercentSign = Key5,\n\t\tCaret = Key6,\n\t\tHat = Caret,\n\t\tAmpersand = Key7,\n\t\tStar = Key8,\n\t\tAsterik = Star,\n\t\tOpenParen = Key9,\n\n\t\tA = 65,\n\t\tB = 66,\n\t\tC = 67,\n\t\tD = 68,\n\t\tE = 69,\n\t\tF = 70,\n\t\tG = 71,\n\t\tH = 72,\n\t\tI = 73,\n\t\tJ = 74,\n\t\tK = 75,\n\t\tL = 76,\n\t\tM = 77,\n\t\tN = 78,\n\t\tO = 79,\n\t\tP = 80,\n\t\tQ = 81,\n\t\tR = 82,\n\t\tS = 83,\n\t\tT = 84,\n\t\tU = 85,\n\t\tV = 86,\n\t\tW = 87,\n\t\tX = 88,\n\t\tY = 89,\n\t\tZ = 90,\n\n\t\tLeftWindowKey = 91,\n\t\tRightWindowKey = 92,\n\t\tSelectKey = 93,\n\n\t\tNumpad0 = 96,\n\t\tNumpad1 = 97,\n\t\tNumpad2 = 98,\n\t\tNumpad3 = 99,\n\t\tNumpad4 = 100,\n\t\tNumpad5 = 101,\n\t\tNumpad6 = 102,\n\t\tNumpad7 = 103,\n\t\tNumpad8 = 104,\n\t\tNumpad9 = 105,\n\n\t\tMultiply = 106,\n\t\tAdd = 107,\n\t\tSubtract = 109,\n\t\tDecimalPoint = 110,\n\t\tDivide = 111,\n\n\t\tF1 = 112,\n\t\tF2 = 113,\n\t\tF3 = 114,\n\t\tF4 = 115,\n\t\tF5 = 116,\n\t\tF6 = 117,\n\t\tF7 = 118,\n\t\tF8 = 119,\n\t\tF9 = 120,\n\t\tF10 = 121,\n\t\tF11 = 122,\n\t\tF12 = 123,\n\n\t\tNumLock = 144,\n\t\tScrollLock = 145,\n\n\t\tSemiColon = 186,\n\t\tEquals = 187,\n\t\tComma = 188,\n\t\tDash = 189,\n\t\tPeriod = 190,\n\t\tUnderScore = Dash,\n\t\tPlusSign = Equals,\n\t\tForwardSlash = 191,\n\t\tTilde = 192,\n\t\tGraveAccent = Tilde,\n\n\t\tOpenBracket = 219,\n\t\tClosedBracket = 221,\n\t\tQuote = 222\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\tclass SingletonEnforcer {\n\t}\n\n\texport class ResizeWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(pvt:SingletonEnforcer) {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[ResizeWatcher] start\");\n\n\t\t\tjQuery(window).on(\"resize\", this.windowResizeHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[ResizeWatcher] stop\");\n\n\t\t\tjQuery(window).off(\"resize\", this.windowResizeHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\tResizeWatcher.stageWidth = $window.width();\n\t\t\tResizeWatcher.stageHeight = $window.height();\n\n\t\t\tconst $body:JQuery = jQuery(\"body\");\n\t\t\tResizeWatcher.contentWidth = $body.width();\n\t\t\tResizeWatcher.contentHeight = $body.height();\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:ResizeWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:ResizeWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\n\n\n\n\t\tprivate static windowResizeHandler = (event:JQueryEventObject):void => {\n\t\t\tResizeWatcher.apply();\n\t\t\tResizeWatcher.eventDispatcher.dispatchEvent(new ResizeWatcherEvent(ResizeWatcherEvent.RESIZE, false, false, event, ResizeWatcher.stageWidth, ResizeWatcher.stageHeight));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getStageWidth():number { return this.stageWidth; }\n\t\tprivate static stageWidth:number = 0;\n\n\t\tpublic static getStageHeight():number { return this.stageHeight; }\n\t\tprivate static stageHeight:number = 0;\n\n\t\tpublic static getContentWidth():number { return this.contentWidth; }\n\t\tprivate static contentWidth:number = 0;\n\n\t\tpublic static getContentHeight():number { return this.contentHeight; }\n\t\tprivate static contentHeight:number = 0;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class ResizeWatcherEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic RESIZE:string = \"resize\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, jqueryEvent:JQueryEventObject = null, stageWidth:number = 0, stageHeight:number = 0) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.jqueryEvent = jqueryEvent;\n\t\t\tthis.stageWidth = stageWidth;\n\t\t\tthis.stageHeight = stageHeight;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():ResizeWatcherEvent {\n\t\t\treturn new ResizeWatcherEvent(this.type, this.bubbles, this.cancelable, this.jqueryEvent, this.stageWidth, this.stageHeight);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[ResizeWatcherEvent (type=\" + this.type + \" stageWidth=\" + this.stageWidth + \" stageHeight=\" + this.stageHeight + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic jqueryEvent:JQueryEventObject;\n\n\t\tpublic stageWidth:number;\n\t\tpublic stageHeight:number;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\tclass SingletonEnforcer {\n\t}\n\n\texport class ScrollWatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(pvt:SingletonEnforcer) {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\t\t}\n\n\t\tpublic static start():void {\n\t\t\tif (this.isRunning) return;\n\t\t\tthis.isRunning = true;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[ScrollWatcher] start\");\n\n\t\t\tjQuery(window).on(\"resize\", this.windowScrollHandler);\n\t\t\tjQuery(window).on(\"scroll\", this.windowScrollHandler);\n\t\t\tthis.apply();\n\t\t}\n\n\n\t\tpublic static stop():void {\n\t\t\tif (!this.isRunning) return;\n\t\t\tthis.isRunning = false;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[ScrollWatcher] stop\");\n\n\t\t\tjQuery(window).off(\"resize\", this.windowScrollHandler);\n\t\t\tjQuery(window).off(\"scroll\", this.windowScrollHandler);\n\t\t}\n\n\t\tpublic static apply():void {\n\t\t\tconst $window:JQuery = jQuery(window);\n\t\t\tthis.windowHeight = $window.height();\n\t\t\tthis.scrollTop = $window.scrollTop();\n\t\t\tthis.scrollBottom = this.scrollTop + this.windowHeight;\n\t\t}\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:ScrollWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:ScrollWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static calcScrolledPosition(y:number):number {\n\t\t\treturn y - this.scrollTop;\n\t\t};\n\n\t\tpublic static calcScrolledPositionRatio(y:number):number {\n\t\t\treturn this.calcScrolledPosition(y) / this.windowHeight;\n\t\t}\n\n\n\n\n\n\n\t\tprivate static windowScrollHandler = (event:JQueryEventObject):void => {\n\t\t\tScrollWatcher.apply();\n\t\t\tScrollWatcher.eventDispatcher.dispatchEvent(new ScrollWatcherEvent(ScrollWatcherEvent.SCROLL, false, false, event));\n\t\t};\n\n\t\tprivate static windowResizeHandler = (event:JQueryEventObject):void => {\n\t\t\tScrollWatcher.apply();\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsRunning():boolean { return this.isRunning; }\n\t\tprivate static isRunning:boolean = false;\n\n\t\tpublic static getScrollTop():number { return this.scrollTop; }\n\t\tprivate static scrollTop:number;\n\n\t\tpublic static getScrollBottom():number { return this.scrollBottom; }\n\t\tprivate static scrollBottom:number;\n\n\t\tpublic static getWindowHeight():number { return this.windowHeight; }\n\t\tprivate static windowHeight:number = 0;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class ScrollWatcherEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic SCROLL:string = \"scroll\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, jqueryEvent:JQueryEventObject = null) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.jqueryEvent = jqueryEvent;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():ScrollWatcherEvent {\n\t\t\treturn new ScrollWatcherEvent(this.type, this.bubbles, this.cancelable, this.jqueryEvent);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[ScrollWatcherEvent (type=\" + this.type + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic jqueryEvent:JQueryEventObject;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\tclass SingletonEnforcer {\n\t}\n\n\texport class AssetLoader {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(pvt:SingletonEnforcer) {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate static initialize():void {\n\t\t\tif (this.isInitialized) return;\n\t\t\tthis.isInitialized = true;\n\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isLoaded = false;\n\t\t\tthis.isCanceled = false;\n\n\t\t\tthis.loader = new createjs.LoadQueue();\n\n\t\t\tthis.eventDispatcher = new createjs.EventDispatcher();\n\t\t}\n\n\t\tpublic static load():void {\n\t\t\tif (this.isLoading || this.isLoaded) return;\n\t\t\tthis.isLoading = true;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[AssetLoader] load\");\n\n\t\t\tthis.setListener();\n\t\t\tthis.loader.load();\n\t\t}\n\n\t\tpublic static addFile(filePath:string, id:string = null):void {\n\t\t\tthis.initialize();\n\t\t\tif (id) {\n\t\t\t\tthis.loader.loadFile({ id: id, src: filePath });\n\t\t\t} else {\n\t\t\t\tthis.loader.loadFile(filePath);\n\t\t\t}\n\t\t}\n\n\t\tpublic static addFiles(files:({id:string,src:string}|string)[]):void {\n\t\t\tthis.initialize();\n\t\t\tthis.loader.loadManifest(files);\n\t\t}\n\n\t\tpublic static addManifest(jsonPath:string):void {\n\t\t\tthis.initialize();\n\t\t\tthis.loader.loadManifest(jsonPath);\n\t\t}\n\n\t\tpublic static cancel():void {\n\t\t\tif (!this.isLoading) return;\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isCanceled = true;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[AssetLoader] cancel\");\n\n\t\t\tthis.loader.cancel();\n\t\t}\n\n\t\tpublic static close():void {\n\t\t\tif (!this.isLoading && !this.isCanceled) return;\n\t\t\tthis.isLoading = false;\n\t\t\tthis.isCanceled = false;\n\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[AssetLoader] close\");\n\n\t\t\tthis.loader.close();\n\t\t}\n\n\t\tpublic static clear():void {\n\t\t\tthis.initialize();\n\t\t\tconsole.log(\"[AssetLoader] clear\");\n\n\t\t\tthis.clearListener();\n\t\t\tthis.loader.destroy();\n\t\t\tthis.loader = new createjs.LoadQueue();\n\t\t}\n\n\n\n\n\n\t\tpublic static addEventListener(eventType:string, listener:(event:ResizeWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.addEventListener(eventType, listener, useCapture);\n\t\t}\n\n\t\tpublic static removeEventListener(eventType:string, listener:(event:ResizeWatcherEvent) => void, useCapture:boolean = false):void {\n\t\t\tthis.initialize();\n\t\t\tthis.eventDispatcher.removeEventListener(eventType, listener, useCapture);\n\t\t}\n\n\n\n\n\n\t\tprivate static setListener():void {\n\t\t\tthis.loader.addEventListener(\"fileload\", this.loaderFileLoadHandler);\n\t\t\tthis.loader.addEventListener(\"fileerror\", this.loaderFileErrorHandler);\n\t\t\tthis.loader.addEventListener(\"progress\", this.loaderProgressHandler);\n\t\t\tthis.loader.addEventListener(\"error\", this.loaderErrorHandler);\n\t\t\tthis.loader.addEventListener(\"complete\", this.loaderCompleteHandler);\n\t\t}\n\n\t\tprivate static clearListener():void {\n\t\t\tthis.loader.removeEventListener(\"fileload\", this.loaderFileLoadHandler);\n\t\t\tthis.loader.removeEventListener(\"fileerror\", this.loaderFileErrorHandler);\n\t\t\tthis.loader.removeEventListener(\"progress\", this.loaderProgressHandler);\n\t\t\tthis.loader.removeEventListener(\"error\", this.loaderErrorHandler);\n\t\t\tthis.loader.removeEventListener(\"complete\", this.loaderCompleteHandler);\n\t\t}\n\n\n\n\n\n\t\tprivate static loaderFileLoadHandler = (event:createjs.Event):void => {\n\t\t\tconsole.log(\"[AssetLoader] file load : progress = \" + event.progress, \" (\" + event.loaded + \" / \" + event.total);\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.FILE_LOAD, false, false, event.progress, event.loaded, event.total, event.result));\n\t\t};\n\n\t\tprivate static loaderErrorHandler = (event:createjs.ErrorEvent):void => {\n\t\t\tconsole.log(\"[AssetLoader] error : title = \" + event.title + \", message = \" + event.message);\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.ERROR));\n\t\t};\n\n\t\tprivate static loaderProgressHandler = (event:createjs.ProgressEvent):void => {\n\t\t\tconsole.log(\"[AssetLoader] progress : progress = \" + event.progress, \" (\" + event.loaded + \" / \" + event.total);\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.PROGRESS, false, false, event.progress, event.loaded, event.total));\n\t\t};\n\n\t\tprivate static loaderFileErrorHandler = (event:createjs.Event):void => {\n\t\t\tconsole.log(\"[AssetLoader] file error : \" + event.error);\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.FILE_ERROR, false, false, event.progress, event.loaded, event.total));\n\t\t};\n\n\t\tprivate static loaderCompleteHandler = (event:createjs.Event):void => {\n\t\t\tconsole.log(\"[AssetLoader] complete\");\n\t\t\tAssetLoader.eventDispatcher.dispatchEvent(new AssetLoaderEvent(AssetLoaderEvent.COMPLETE, false, false, event.progress, event.loaded, event.total));\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static getIsLoading():boolean { return this.isLoading; }\n\t\tprivate static isLoading:boolean;\n\n\t\tpublic static getIsLoaded():boolean { return this.isLoaded; }\n\t\tprivate static isLoaded:boolean;\n\n\t\tpublic static getIsCanceled():boolean { return this.isCanceled; }\n\t\tprivate static isCanceled:boolean;\n\n\t\tprivate static loader:createjs.LoadQueue;\n\n\t\tprivate static isInitialized:boolean = false;\n\t\tprivate static eventDispatcher:createjs.EventDispatcher = null;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class AssetLoaderEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tstatic FILE_LOAD:string = \"fileload\";\n\t\tstatic FILE_ERROR:string = \"fileerror\";\n\t\tstatic PROGRESS:string = \"progress\";\n\t\tstatic COMPLETE:string = \"complete\";\n\t\tstatic ERROR:string = \"error\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false, progress:number = 0, loadedCount:number = 0, totalCount:number = 0, content:any = null) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t\tthis.progress = progress;\n\t\t\tthis.loadedCount = loadedCount;\n\t\t\tthis.totalCount = totalCount;\n\t\t\tthis.content = content;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():AssetLoaderEvent {\n\t\t\treturn new AssetLoaderEvent(this.type, this.bubbles, this.cancelable, this.progress, this.loadedCount, this.totalCount, this.content);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[AssetLoaderEvent (type=\" + this.type + \" progress=\" + this.progress + \"loadedCount=\" + this.loadedCount + \" totalCount=\" + this.totalCount + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic progress:number;\n\t\tpublic loadedCount:number;\n\t\tpublic totalCount:number;\n\t\tpublic content:any;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport abstract class View<T extends createjs.DisplayObject> extends createjs.EventDispatcher {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(view:T = null) {\n\t\t\tsuper();\n\t\t\tthis.view = view;\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = false;\n\t\t\tthis.isReady = false;\n\t\t\tthis.isShowing = false;\n\t\t\tthis.isShown = true;\n\t\t\tthis.isHiding = false;\n\t\t\tthis.autoHideWithInit = true;\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic initialize():void {\n\t\t\tif (this.isInitializing || this.isInitialized) return;\n\t\t\tthis.isInitializing = true;\n\t\t\tthis.view = this.implInitialize();\n\t\t\tthis.throwError(\"view is null\", !this.view);\n\t\t\tthis.hide(false);\n\t\t\tthis.isInitializing = false;\n\t\t\tthis.isInitialized = true;\n\t\t}\n\n\t\tpublic ready():void {\n\t\t\tthis.throwError(\"ready() was called without being initialized\", !this.isInitialized);\n\t\t\tthis.implReady();\n\t\t\tthis.isReady = true;\n\t\t}\n\n\t\tpublic finalize():void {\n\t\t\tthis.implFinalize();\n\t\t}\n\n\t\tpublic show(useTransition:boolean = true):void {\n\t\t\tif (this.isShown) return;\n\t\t\tthis.getShowCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic hide(useTransition:boolean = true):void {\n\t\t\tif (!this.isShown) return;\n\t\t\tthis.getHideCommand(useTransition).execute();\n\t\t}\n\n\t\tpublic getShowCommand(useTransition:boolean = true):JPP.Command {\n\t\t\tconst command:JPP.Serial = new JPP.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\tif (this.isShown) return;\n\t\t\t\t\tthis.throwError(\"getShowCommand() was called without being initialized\", !this.isInitialized);\n\t\t\t\t\tthis.throwError(\"getShowCommand() was called without being ready\", !this.isReady);\n\t\t\t\t\tthis.isShown = true;\n\t\t\t\t\tthis.isShowing = true;\n\t\t\t\t\tif (this.hideCommand) this.hideCommand.interrupt();\n\t\t\t\t\tthis.showCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implShow(this.view, useTransition),\n\t\t\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\t\t\tthis.showCommand = null;\n\t\t\t\t\t\t\tthis.isShowing = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tpublic getHideCommand(useTransition:boolean = true):JPP.Command {\n\t\t\tconst command:JPP.Serial = new JPP.Serial();\n\t\t\tcommand.addCommand(\n\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\tif (!this.isShown) return;\n\t\t\t\t\tif (!this.isInitializing) {\n\t\t\t\t\t\tthis.throwError(\"getHideCommand() was called without being initialized\", !this.isInitialized);\n\t\t\t\t\t\tthis.throwError(\"getHideCommand() was called without being ready\", !this.isReady);\n\t\t\t\t\t}\n\t\t\t\t\tthis.isShown = false;\n\t\t\t\t\tthis.isHiding = true;\n\t\t\t\t\tif (this.showCommand) this.showCommand.interrupt();\n\t\t\t\t\tthis.hideCommand = command;\n\t\t\t\t\tcommand.insertCommand(\n\t\t\t\t\t\tthis.implHide(this.view, useTransition),\n\t\t\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\t\t\tthis.hideCommand = null;\n\t\t\t\t\t\t\tthis.isHiding = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn command;\n\t\t}\n\n\t\tprotected abstract implInitialize():T;\n\t\tprotected abstract implReady():void;\n\t\tprotected abstract implFinalize():void;\n\t\tprotected abstract implShow(view:T, useTransition:boolean):JPP.Command;\n\t\tprotected abstract implHide(view:T, useTransition:boolean):JPP.Command;\n\n\n\n\n\n\t\tprivate throwError(message:string, condition:boolean = true):void {\n\t\t\tif (condition) {\n\t\t\t\tthrow new Error(\"[View] ERROR : \" + message);\n\t\t\t}\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic getIsInitializing():boolean { return this.isInitializing; }\n\t\tprivate isInitializing:boolean;\n\n\t\tpublic getIsInitialized():boolean { return this.isInitialized; }\n\t\tprivate isInitialized:boolean;\n\n\t\tpublic getIsReady():boolean { return this.isReady; }\n\t\tprivate isReady:boolean;\n\n\t\tpublic getIsShowing():boolean { return this.isShowing; }\n\t\tprivate isShowing:boolean;\n\n\t\tpublic getIsShown():boolean { return this.isShown; }\n\t\tprivate isShown:boolean;\n\n\t\tpublic getIsHiding():boolean { return this.isHiding; }\n\t\tprivate isHiding:boolean;\n\n\t\tpublic getIsHidden():boolean { return !this.isShown; }\n\n\t\tpublic getView():T { return this.view; }\n\t\tprivate view:T;\n\n\t\tpublic getAutoHideWithInit():boolean { return this.autoHideWithInit; }\n\t\tpublic setAutoHideWithInit(value:boolean):void { this.autoHideWithInit = value; }\n\t\tprivate autoHideWithInit:boolean;\n\n\t\tprivate showCommand:JPP.Command;\n\t\tprivate hideCommand:JPP.Command;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace alm {\n\n\texport class ViewEvent extends createjs.Event {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// EVENT\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic static INIT:string = \"init\";\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor(eventType:string, bubbles:boolean = false, cancelable:boolean = false) {\n\t\t\tsuper(eventType, bubbles, cancelable);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic clone():ViewEvent {\n\t\t\treturn new ViewEvent(this.type, this.bubbles, this.cancelable);\n\t\t}\n\n\t\tpublic toString():string {\n\t\t\treturn \"[ViewEvent (type=\" + this.type + \")]\";\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule project {\n\n\texport class Config {\n\n\t\t// Debug mode\n\t\tpublic static DEBUG_MODE:boolean = true;\n\n\t\t// Default stage size\n\t\tpublic static DEFAULT_STAGE_W:number = 1920;\n\t\tpublic static DEFAULT_STAGE_H:number = 1080;\n\n\t\t// Frame Rate\n\t\tpublic static FPS:number = 60;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nnamespace project {\n\n\texport class Application {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tpublic run():void {\n\t\t\tconsole.log(\"[Application] run\");\n\n\t\t\t// Setup CreateJS\n\t\t\tthis.$canvas = jQuery(\"#stage\");\n\t\t\tthis.stage = new createjs.Stage(this.$canvas.get(0));\n\n\t\t\t// Setup Ticker\n\t\t\tcreatejs.Ticker.framerate = Config.FPS;\n\t\t\tcreatejs.Ticker.addEventListener(\"tick\", this.tickerHandler);\n\n\t\t\t// Setup stats\n\t\t\tif (Config.DEBUG_MODE) {\n\t\t\t\tthis.stats = new Stats();\n\t\t\t\tjQuery(\"body\").append(this.stats.domElement);\n\t\t\t}\n\n\t\t\t// Setup view\n\t\t\tthis.screen = new Screen();\n\t\t\tthis.stage.addChild(this.screen.getView());\n\n\t\t\t// Setup watcher\n\t\t\talm.ResizeWatcher.addEventListener(alm.ResizeWatcherEvent.RESIZE, this.resizeWatcherResizeHandler);\n\t\t\talm.ScrollWatcher.addEventListener(alm.ScrollWatcherEvent.SCROLL, this.scrollWatcherResizeHandler);\n\t\t\talm.KeyWatcher.addEventListener(alm.KeyWatcherEvent.KEY_DOWN, this.keyWatcherResizeHandler);\n\n\t\t\tthis.load();\n\t\t}\n\n\t\tprivate load():void {\n\t\t\talm.ResizeWatcher.apply();\n\t\t\talm.ScrollWatcher.apply();\n\n\t\t\tthis.screen.ready();\n\n\t\t\tthis.screen.show();\n\t\t\tthis.$canvas.css({ display: \"block\" });\n\n\t\t\talm.ResizeWatcher.start();\n\t\t\talm.ScrollWatcher.start();\n\t\t\talm.KeyWatcher.start();\n\n\t\t\tthis.resizeWatcherResizeHandler(null);\n\t\t\tthis.tickerHandler(null);\n\t\t}\n\n\t\tprivate update():void {\n\t\t\tif (Config.DEBUG_MODE) this.stats.begin();\n\t\t\tthis.stage.update();\n\t\t\tif (Config.DEBUG_MODE) this.stats.end();\n\t\t}\n\n\t\tprivate resize():void {\n\t\t\tconst stageWidth:number = alm.ResizeWatcher.getStageWidth();\n\t\t\tconst stageHeight:number = alm.ResizeWatcher.getStageHeight();\n\n\t\t\tthis.$canvas.attr({ width: stageWidth, height: stageHeight });\n\t\t\tthis.$canvas.css({ width: stageWidth, height: stageHeight });\n\t\t}\n\n\n\n\n\n\t\tprivate tickerHandler = (event:createjs.Event):void => {\n\t\t\tthis.update();\n\t\t};\n\n\t\tprivate resizeWatcherResizeHandler = (event:alm.ResizeWatcherEvent):void => {\n\t\t\tthis.resize();\n\t\t};\n\n\t\tprivate scrollWatcherResizeHandler = (event:alm.ScrollWatcherEvent):void => {\n\t\t};\n\n\t\tprivate keyWatcherResizeHandler = (event:alm.KeyWatcherEvent):void => {\n\t\t\tconsole.log(\"[Application] key down : '\" + event.key + \"'\");\n\t\t};\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate stats:Stats;\n\t\tprivate $canvas:JQuery;\n\t\tprivate stage:createjs.Stage;\n\t\tprivate screen:Screen;\n\t}\n}","/// <reference path=\"../reference.ts\" />\n\nmodule project {\n\n\texport class Screen extends alm.View<createjs.Container> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():createjs.Container {\n\t\t\tconst view:createjs.Container = new createjs.Container();\n\n\t\t\tthis.background = new Background();\n\t\t\tview.addChild(this.background.getView());\n\n\t\t\tthis.foreground = new Foreground();\n\t\t\tview.addChild(this.foreground.getView());\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t\tthis.background.ready();\n\t\t\tthis.foreground.ready();\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t\tthis.foreground.finalize();\n\t\t\tthis.background.finalize();\n\t\t}\n\n\t\tprotected implShow(view:createjs.Container, useTransition:boolean):JPP.Command {\n\t\t\treturn new JPP.Serial(\n\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\tview.visible = true;\n\t\t\t\t}),\n\t\t\t\tnew JPP.Parallel(\n\t\t\t\t\tthis.foreground.getShowCommand(useTransition),\n\t\t\t\t\tthis.background.getShowCommand(useTransition)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tprotected implHide(view:createjs.Container, useTransition:boolean):JPP.Command {\n\t\t\treturn new JPP.Serial(\n\t\t\t\tnew JPP.Parallel(\n\t\t\t\t\tthis.foreground.getHideCommand(useTransition),\n\t\t\t\t\tthis.background.getHideCommand(useTransition)\n\t\t\t\t),\n\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\tview.visible = false;\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate foreground:Foreground;\n\t\tprivate background:Background;\n\t}\n}","/// <reference path=\"../../reference.ts\" />\n\nmodule project {\n\n\texport class Background extends alm.View<createjs.Container> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():createjs.Container {\n\t\t\tconst view:createjs.Container = new createjs.Container();\n\n\t\t\tthis.circles = [];\n\t\t\tconst numCircle:number = 100;\n\t\t\tlet circle:Circle;\n\t\t\tfor (let i:number = 0; i < numCircle; ++i) {\n\t\t\t\tcircle = new Circle();\n\t\t\t\tview.addChild(circle.getView());\n\t\t\t\tthis.circles.push(circle);\n\t\t\t}\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t\tconst numCircle:number = this.circles.length;\n\t\t\tfor (let i:number = 0; i < numCircle; ++i) {\n\t\t\t\tthis.circles[i].ready();\n\t\t\t}\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t\tconst numCircle:number = this.circles.length;\n\t\t\tfor (let i:number = 0; i < numCircle; ++i) {\n\t\t\t\tthis.circles[i].finalize();\n\t\t\t}\n\t\t}\n\n\t\tprotected implShow(view:createjs.Container, useTransition:boolean):JPP.Command {\n\t\t\treturn new JPP.Serial(\n\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\tconst numCircle:number = this.circles.length;\n\t\t\t\t\tfor (let i:number = 0; i < numCircle; ++i) {\n\t\t\t\t\t\tthis.circles[i].show(useTransition);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\talm.CommandUtil.fadeIn(view, useTransition ? 1 : 0, JPP.Easing.easeOutQuart, false)\n\t\t\t);\n\t\t}\n\n\t\tprotected implHide(view:createjs.Container, useTransition:boolean):JPP.Command {\n\t\t\treturn new JPP.Serial(\n\t\t\t\tnew JPP.Func(():void => {\n\t\t\t\t\tconst numCircle:number = this.circles.length;\n\t\t\t\t\tfor (let i:number = 0; i < numCircle; ++i) {\n\t\t\t\t\t\tthis.circles[i].hide(useTransition);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\talm.CommandUtil.fadeOut(view, useTransition ? 1 : 0, JPP.Easing.easeOutQuart, false)\n\t\t\t);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate circles:Circle[];\n\t}\n}","/// <reference path=\"../../reference.ts\" />\n\nmodule project {\n\n\timport ScrollWatcher = alm.ScrollWatcher;\n\texport class Circle extends alm.View<createjs.Shape> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():createjs.Shape {\n\t\t\tconst view:createjs.Shape = new createjs.Shape();\n\n\t\t\tthis.radius = alm.Num.random(50, 100);\n\t\t\tconst g:createjs.Graphics = view.graphics;\n\t\t\tg.beginFill(\"#\" + (\"000000\" + Math.floor(Math.random() * 0xffffff)).substr(-6, 6));\n\t\t\tg.drawCircle(0, 0, this.radius);\n\t\t\tg.endFill();\n\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t\talm.ScrollWatcher.addEventListener(alm.ScrollWatcherEvent.SCROLL, this.scrollWatcherScrollHandler);\n\n\t\t\tthis.offsetX = alm.Num.random(this.radius, alm.ResizeWatcher.getContentWidth() - this.radius);\n\t\t\tthis.offsetY = alm.Num.random(this.radius, alm.ResizeWatcher.getContentHeight() - this.radius);\n\n\t\t\tconst view:createjs.Shape = this.getView();\n\t\t\tview.x = this.offsetX;\n\t\t\tview.y = this.offsetY;\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t\talm.ScrollWatcher.removeEventListener(alm.ScrollWatcherEvent.SCROLL, this.scrollWatcherScrollHandler);\n\t\t}\n\n\t\tprotected implShow(view:createjs.Shape, useTransition:boolean):JPP.Command {\n\t\t\treturn new JPP.Func(():void => {\n\t\t\t\tview.alpha = 1;\n\t\t\t});\n\t\t}\n\n\t\tprotected implHide(view:createjs.Shape, useTransition:boolean):JPP.Command {\n\t\t\treturn new JPP.Func(():void => {\n\t\t\t\tview.alpha = 0.2;\n\t\t\t});\n\t\t}\n\n\n\n\n\n\t\tprivate scrollWatcherScrollHandler = (event:alm.ScrollWatcherEvent):void => {\n\t\t\tconst view:createjs.Shape = this.getView();\n\t\t\tview.y = ScrollWatcher.calcScrolledPosition(this.offsetY);\n\n\t\t\tconst scrolledPositionRatio:number = ScrollWatcher.calcScrolledPositionRatio(this.offsetY);\n\t\t\tif (scrolledPositionRatio >= 0 && scrolledPositionRatio <= 1) {\n\t\t\t\tthis.show();\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprivate radius:number;\n\t\tprivate offsetX:number;\n\t\tprivate offsetY:number;\n\t}\n}","/// <reference path=\"../../reference.ts\" />\n\nmodule project {\n\n\texport class Foreground extends alm.View<createjs.Container> {\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// CONSTRUCTOR\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.initialize();\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// METHOD\n\t\t//\n\t\t// --------------------------------------------------\n\n\t\tprotected implInitialize():createjs.Container {\n\t\t\tconst view:createjs.Container = new createjs.Container();\n\t\t\treturn view;\n\t\t}\n\n\t\tprotected implReady():void {\n\t\t}\n\n\t\tprotected implFinalize():void {\n\t\t}\n\n\t\tprotected implShow(view:createjs.Container, useTransition:boolean):JPP.Command {\n\t\t\treturn alm.CommandUtil.fadeIn(view, useTransition ? 1 : 0, JPP.Easing.easeOutQuart, false);\n\t\t}\n\n\t\tprotected implHide(view:createjs.Container, useTransition:boolean):JPP.Command {\n\t\t\treturn alm.CommandUtil.fadeOut(view, useTransition ? 1 : 0, JPP.Easing.easeOutQuart, false);\n\t\t}\n\n\n\n\n\n\t\t// --------------------------------------------------\n\t\t//\n\t\t// MEMBER\n\t\t//\n\t\t// --------------------------------------------------\n\t}\n}","/// <reference path=\"reference.ts\" />\n\nnamespace project {\n\n\tconst application = new Application();\n\tapplication.run();\n}"]}